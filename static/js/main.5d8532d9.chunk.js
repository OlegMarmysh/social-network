(window["webpackJsonpmy-app"]=window["webpackJsonpmy-app"]||[]).push([[0],{105:function(e,t,n){e.exports=n.p+"static/media/users-vector-icon-png_260862.13988554.jpg"},126:function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var a=n(42),r=n(9),s="social-network/dialogsPage/SEND_MESSAGE",o={dialogs:[{id:"1",name:"Pasha"},{id:"2",name:"Oleg"},{id:"3",name:"Nastya"},{id:"4",name:"Alex"},{id:"5",name:"John"}],messages:[{id:"1",message:"Hello my dear friend"},{id:"2",message:"How are you, BRO"},{id:"3",message:"Where is my socks"}]},i=function(e){return{type:s,newTextMessage:e}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:var n={id:"4",message:t.newTextMessage};return Object(r.a)({},e,{messages:[].concat(Object(a.a)(e.messages),[n]),newTextMessage:""});default:return e}}},130:function(e,t,n){e.exports={sidebar:"Sidebar_sidebar__20WZw"}},134:function(e,t,n){e.exports={usersPage:"Paginator_usersPage__3bBdp"}},135:function(e,t,n){e.exports=n.p+"static/media/Spinner-1s-200px.b0fb2661.svg"},16:function(e,t,n){e.exports={nav:"NavBar_nav__3NF4E",item:"NavBar_item__2seVN",activeLink:"NavBar_activeLink__16Ler"}},164:function(e,t,n){e.exports=n(290)},169:function(e,t,n){},19:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var a=n(133),r=a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"f886d0ad-c005-4c6a-95be-b337dfab64f4"}}),s={getUsers:function(e,t){return r.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},unfollowUsers:function(e){return r.delete("follow/".concat(e))},followUsers:function(e){return r.post("follow/".concat(e),{})}},o={getAuthUserData:function(){return r.get("auth/me")},login:function(e,t,n){return r.post("auth/login",{email:e,password:t,rememberMe:n})},logout:function(){return r.delete("auth/login")}},i={getUserProfile:function(e){return r.get("profile/".concat(e))},getUserStatus:function(e){return r.get("profile/status/".concat(e))},updateUserStatus:function(e){return r.put("profile/status",{status:e})},savePhoto:function(e){var t=new FormData;return t.append("image",e),r.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})}}},290:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=(n(95),n(62)),o=n.n(s),i=n(32),c=n(33),u=n(35),l=n(34),m=n(36),f=(n(169),n(16)),p=n.n(f),d=n(12),g=n(87),v=n.n(g),E=function(e){return r.a.createElement("div",{className:v.a.listFriends},r.a.createElement("div",null,r.a.createElement("img",{src:"http://www.gamer.ru/system/attached_images/images/000/412/647/original/awesome_smiley___engineer_tf2_by_sitic.png"})),r.a.createElement("div",{className:v.a.name},e.name))},h=n(130),b=n.n(h),w=function(e){var t=e.friends.map((function(e){return r.a.createElement(E,{name:e.name})}));return r.a.createElement("div",{className:b.a.sidebar},r.a.createElement("span",null,"Friends"),r.a.createElement("div",null,t))},O=n(11),P=Object(O.b)((function(e){return{friends:e.sidebar.friends}}),(function(e){return{}}))(w),_=function(){return r.a.createElement("div",{className:p.a.nav},r.a.createElement("div",{className:p.a.item},r.a.createElement(d.b,{to:"/Profile",activeClassName:p.a.activeLink},"Profile")),r.a.createElement("div",{className:p.a.item},r.a.createElement(d.b,{to:"/Dialogs",activeClassName:p.a.activeLink},"Messages")),r.a.createElement("div",{className:p.a.item},r.a.createElement(d.b,{to:"/news",activeClassName:p.a.activeLink},"News")),r.a.createElement("div",{className:p.a.item},r.a.createElement(d.b,{to:"/Music",activeClassName:p.a.activeLink},"Music")),r.a.createElement("div",{className:p.a.item},r.a.createElement(d.b,{to:"/Settings",activeClassName:p.a.activeLink},"Settings")),r.a.createElement("div",{className:p.a.item},r.a.createElement(d.b,{to:"/Users",activeClassName:p.a.activeLink},"Users")),r.a.createElement("div",null,r.a.createElement(P,null)))},j=n(28),y=function(){return r.a.createElement("div",null,"News")},S=function(){return r.a.createElement("div",null,"Music")},k=function(){return r.a.createElement("div",null,"Settings")},I=n(8),N=n.n(I),x=n(42),C=n(9),F=n(19),U=function(e,t,n,a){return e.map((function(e){return e[n]===t?Object(C.a)({},e,{},a):e}))},z="social-network/userPage/FOLLOW",L="social-network/userPage/UNFOLLOW",T="social-network/userPage/SET_USERS",A="social-network/userPage/SET_PAGES",M="social-network/userPage/TOTAL_COUNT_USERS",D="social-network/userPage/TOGGLE_IS_FETCHING",R="social-network/userPage/FOLLOWING_IN_PROGRESS",B={users:[],totalCountItems:50,sizePage:10,currentPage:1,isFetching:!1,followingInProgress:[],portionSize:10},G=function(e){return{type:D,isFetching:e}},H=function(e,t){return{type:R,isFetching:e,userId:t}},W=function(e,t,n,a){return N.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,N.a.awrap(n);case 2:0===r.sent.data.resultCode&&e(a),e(H(!1,t));case 5:case"end":return r.stop()}}))},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object(C.a)({},e,{users:U(e.users,t.userId,"id",{followed:!0})});case L:return Object(C.a)({},e,{users:U(e.users,t.userId,"id",{followed:!1})});case T:return Object(C.a)({},e,{users:t.users});case A:return Object(C.a)({},e,{currentPage:t.pageNumber});case M:return Object(C.a)({},e,{totalCountItems:t.countUsers});case D:return Object(C.a)({},e,{isFetching:t.isFetching});case R:return Object(C.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(x.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},J=n(66),V=n.n(J),Z=n(128),K=n(134),X=n.n(K),Y=function(e){for(var t=e.totalCountItems,n=e.sizePage,s=e.currentPage,o=e.onSetPages,i=e.portionSize,c=Math.ceil(t/n),u=[],l=1;l<=c;l++)u.push(l);var m=Math.ceil(c/i),f=Object(a.useState)(1),p=Object(Z.a)(f,2),d=p[0],g=p[1],v=(d-1)*i+1,E=d*i;return r.a.createElement("div",null,d>1&&r.a.createElement("button",{onClick:function(){g(d-1)}},"PREV"),u.filter((function(e){return e>=v&&e<=E})).map((function(e){return r.a.createElement("span",{className:s===e&&X.a.usersPage,onClick:function(){o(e)}},e)})),m>d&&r.a.createElement("button",{onClick:function(){g(d+1)}},"NEXT"))},Q=n(105),$=n.n(Q),ee=function(e){var t=e.userId,n=e.photos,a=e.followed,s=e.name,o=e.status,i=e.followingInProgress,c=e.unFollow,u=e.follow;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(d.b,{to:"/profile/".concat(t)},r.a.createElement("img",{className:V.a.photo,src:null!==n.small?n.small:$.a}))),r.a.createElement("div",null,a?r.a.createElement("button",{disabled:i.some((function(e){return e===t})),onClick:function(){c(t)}},"Unfollow"):r.a.createElement("button",{disabled:i.some((function(e){return e===t})),onClick:function(){u(t)}},"Follow")),r.a.createElement("span",null,r.a.createElement("div",null,s),r.a.createElement("div",null,o)),r.a.createElement("span",null,r.a.createElement("div",null,"u.location.country"),r.a.createElement("div",null,"u.location.city")))},te=function(e){var t=e.totalCountItems,n=e.portionSize,a=e.sizePage,s=e.currentPage,o=e.onSetPages,i=e.users,c=e.followingInProgress,u=e.unFollow,l=e.follow;return r.a.createElement("div",null,r.a.createElement(Y,{totalCountItems:t,sizePage:a,currentPage:s,onSetPages:o,portionSize:n}),i.map((function(e){return r.a.createElement(ee,{userId:e.id,status:e.status,name:e.name,followed:e.followed,photos:e.photos,followingInProgress:c,unFollow:u,follow:l,className:V.a.users})})))},ne=n(63),ae=function(e){return e.users.users},re=function(e){return e.users.totalCountItems},se=function(e){return e.users.sizePage},oe=function(e){return e.users.currentPage},ie=function(e){return e.users.isFetching},ce=function(e){return e.users.followingInProgress},ue=function(e){return e.users.portionSize},le=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).onSetPages=function(e){n.props.requestUsers(e,n.props.sizePage)},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.requestUsers(this.props.currentPage,this.props.sizePage)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,this.props.isFetching?r.a.createElement(ne.a,null):null," "),r.a.createElement("div",null,r.a.createElement(te,{totalCountItems:this.props.totalCountItems,portionSize:this.props.portionSize,sizePage:this.props.sizePage,currentPage:this.props.currentPage,onSetPages:this.onSetPages,users:this.props.users,unFollow:this.props.unFollow,follow:this.props.follow,followingInProgress:this.props.followingInProgress})))}}]),t}(r.a.Component),me=Object(O.b)((function(e){return{users:ae(e),totalCountItems:re(e),sizePage:se(e),currentPage:oe(e),isFetching:ie(e),followingInProgress:ce(e),portionSize:ue(e)}}),{follow:function(e){return function(t){W(t,e,F.c.followUsers(e),function(e){return{type:z,userId:e}}(e))}},unFollow:function(e){return function(t){W(t,e,F.c.unfollowUsers(e),function(e){return{type:L,userId:e}}(e))}},requestUsers:function(e,t){return function(n){var a;return N.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n(G(!0)),r.next=3,N.a.awrap(F.c.getUsers(e,t));case 3:a=r.sent,n(G(!1)),n((o=a.items,{type:T,users:o})),n((s=a.totalCount,{type:M,countUsers:s})),n({type:A,pageNumber:e});case 8:case"end":return r.stop()}var s,o}))}}})(le),fe=n(90),pe=n.n(fe),de=function(e){return r.a.createElement("div",{className:pe.a.header},r.a.createElement("img",{src:"https://avatanplus.com/files/resources/mid/5cd273c518f1216a961439ee.png"}),r.a.createElement("div",{className:pe.a.loginBlock},e.isAuth?r.a.createElement("div",null,e.login," - ",r.a.createElement("button",{onClick:e.logout},"Log out")):r.a.createElement(d.b,{to:"/login"},"Login")))},ge=n(44),ve="social-network/auth/SET_USER_DATA",Ee={userId:null,login:null,email:null,isFetching:!1,isAuth:!1},he=function(e,t,n,a){return{type:ve,payload:{userId:e,login:t,email:n,isAuth:a}}},be=function(){return function(e){var t,n,a,r,s;return N.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,N.a.awrap(F.a.getAuthUserData());case 2:0===(t=o.sent).data.resultCode&&(n=t.data.data,a=n.id,r=n.login,s=n.email,e(he(a,r,s,!0)));case 4:case"end":return o.stop()}}))}},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve:return Object(C.a)({},e,{},t.payload);default:return e}},Oe=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(de,this.props)}}]),t}(r.a.Component),Pe=Object(O.b)((function(e){return{login:e.auth.login,isAuth:e.auth.isAuth}}),{logout:function(){return function(e){return N.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.awrap(F.a.logout());case 2:e(he(null,null,null,!1));case 3:case"end":return t.stop()}}))}}})(Oe),_e=n(43),je=n(127),ye=n(38),Se=n(53),ke=n(50),Ie=n.n(ke),Ne=Object(je.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error;return r.a.createElement("form",{onSubmit:t},Object(ye.c)("email","Email",ye.a,[Se.b]),Object(ye.c)("password","Password",ye.a,[Se.b],{type:"password"}),Object(ye.c)("rememberMe",null,"input",null,{type:"checkbox"},"remember me"),r.a.createElement("div",{className:Ie.a.loginError},n),r.a.createElement("div",null,r.a.createElement("button",null,"Login")))})),xe=Object(O.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:function(e,t,n){return function(a){var r,s;return N.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,N.a.awrap(F.a.login(e,t,n));case 2:0===(r=o.sent).data.resultCode?a(be()):(s=r.data.messages.length>0?r.data.messages[0]:"Some error",a(Object(ge.a)("login",{_error:s})));case 4:case"end":return o.stop()}}))}}})((function(e){var t=e.login;return e.isAuth?r.a.createElement(j.a,{to:"/profile"}):r.a.createElement("div",null,r.a.createElement("h1",null,"LOGIN"),r.a.createElement(Ne,{onSubmit:function(e){var n=e.email,a=e.password,r=e.rememberMe;Object(_e.a)(e,["email","password","rememberMe"]);t(n,a,r)}}))})),Ce=n(7),Fe="social-network/app/INITIALIZED_SUCCESS",Ue={initialized:!1},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Fe:return Object(C.a)({},e,{initialized:!0});default:return e}},Le=n(93),Te=n(126),Ae={friends:[{name:"Vika"},{name:"Olga"},{name:"Boris"}]},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae;arguments.length>1&&arguments[1];return e},De=n(137),Re=n(138),Be=n(129),Ge=Object(Ce.combineReducers)({profilePage:Le.b,dialogsPage:Te.a,sidebar:Me,users:q,auth:we,form:Be.a,app:ze}),He=Object(Ce.createStore)(Ge,Object(Re.composeWithDevTools)(Object(Ce.applyMiddleware)(De.a))),We=function(e){return function(t){return r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(e,t))}},qe=r.a.lazy((function(){return n.e(4).then(n.bind(null,296))})),Je=r.a.lazy((function(){return n.e(3).then(n.bind(null,295))})),Ve=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?r.a.createElement("div",{className:"appWrapper"},r.a.createElement(Pe,null),r.a.createElement(_,null),r.a.createElement("div",{className:"app_wrapper_profile"},r.a.createElement(j.b,{path:"/profile/:userId?",render:We(Je)}),r.a.createElement(j.b,{path:"/dialogs",render:We(qe)}),r.a.createElement(j.b,{path:"/news",render:function(){return r.a.createElement(y,null)}}),r.a.createElement(j.b,{path:"/music",render:function(){return r.a.createElement(S,null)}}),r.a.createElement(j.b,{path:"/settings",render:function(){return r.a.createElement(k,null)}}),r.a.createElement(j.b,{path:"/users",render:function(){return r.a.createElement(me,null)}}),r.a.createElement(j.b,{path:"/login",render:function(){return r.a.createElement(xe,null)}}))):r.a.createElement(ne.a,null)}}]),t}(a.Component),Ze=Object(Ce.compose)(j.f,Object(O.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t;return N.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e(be()),n.next=3,N.a.awrap(Promise.all([t]));case 3:e({type:Fe});case 4:case"end":return n.stop()}}))}}}))(Ve),Ke=function(e){return r.a.createElement(d.a,null,r.a.createElement(O.a,{store:He},r.a.createElement(Ze,null)))};o.a.render(r.a.createElement(Ke,null),document.getElementById("root"))},38:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return f}));var a=n(43),r=n(0),s=n.n(r),o=n(50),i=n.n(o),c=n(86),u=(n(53),function(e){e.input;var t=e.meta,n=Object(a.a)(e,["input","meta"]),r=t.touched&&t.error;return s.a.createElement("div",null,s.a.createElement("div",{className:r?i.a.error:""},n.children),s.a.createElement("div",{className:i.a.error},r&&s.a.createElement("span",null,t.error)))}),l=function(e){var t=e.input,n=(e.meta,Object(a.a)(e,["input","meta"]));return s.a.createElement(u,e,s.a.createElement("textarea",Object.assign({},t,n)))},m=function(e){var t=e.input,n=(e.meta,Object(a.a)(e,["input","meta"]));return s.a.createElement(u,e,s.a.createElement("input",Object.assign({},t,n)))},f=function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return s.a.createElement("div",null,s.a.createElement(c.a,Object.assign({name:e,placeholder:t,component:n,validate:a},r))," ",o)}},50:function(e,t,n){e.exports={error:"FormsControl_error__1S70_",loginError:"FormsControl_loginError__2m793"}},53:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));n(0);var a=function(e){if(!e)return"Field is required"},r=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbol")}}},63:function(e,t,n){"use strict";var a=n(0),r=n.n(a),s=n(135),o=n.n(s);t.a=function(e){return r.a.createElement("div",null,r.a.createElement("img",{src:o.a}))}},66:function(e,t,n){e.exports={users:"Users_users__tFwSo",photo:"Users_photo__1JreJ"}},87:function(e,t,n){e.exports={listFriends:"Friends_listFriends__2v1S1",name:"Friends_name__1sxdB"}},90:function(e,t,n){e.exports={header:"Header_header__25gid",loginBlock:"Header_loginBlock__3arcq"}},93:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return E})),n.d(t,"f",(function(){return h})),n.d(t,"e",(function(){return b}));var a=n(8),r=n.n(a),s=n(42),o=n(9),i=n(19),c="social-network/profilePage/ADD_POST",u="social-network/profilePage/SET_USER_PROFILE",l="social-network/profilePage/SET_USER_STATUS",m="social-network/profilePage/DELETE_POST",f="social-network/profilePage/SAVE_PHOTO",p={posts:[{id:"1",post:"How are you my dear friends",likeCounts:"60"},{id:"2",post:"Its my first project",likeCounts:"67"}],profile:null,status:""},d=function(e){return{type:c,newTextPost:e}},g=function(e){return{type:l,status:e}},v=function(e){return function(t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(i.b.getUserProfile(e));case 2:n=a.sent,t((s=n.data,{type:u,profile:s}));case 4:case"end":return a.stop()}var s}))}},E=function(e){return function(t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(i.b.getUserStatus(e));case 2:n=a.sent,t(g(n.data));case 4:case"end":return a.stop()}}))}},h=function(e){return function(t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(i.b.updateUserStatus(e));case 2:0===(n=a.sent).data.resultCode?t(g(e)):t(g(n.data.messages));case 4:case"end":return a.stop()}}))}},b=function(e){return function(t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(i.b.savePhoto(e));case 2:0===(n=a.sent).data.resultCode&&t((s=n.data.data.photos,{type:f,photos:s}));case 4:case"end":return a.stop()}var s}))}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:var n={id:"3",post:t.newTextPost,likeCounts:"0"};return Object(o.a)({},e,{posts:[].concat(Object(s.a)(e.posts),[n])});case m:return Object(o.a)({},e,{posts:e.posts.filter((function(e){return e.id!==t.postId}))});case u:return Object(o.a)({},e,{profile:t.profile});case l:return Object(o.a)({},e,{status:t.status});case f:return Object(o.a)({},e,{profile:Object(o.a)({},e.profile,{photos:t.photos})});default:return e}}},95:function(e,t,n){}},[[164,1,2]]]);
//# sourceMappingURL=main.5d8532d9.chunk.js.map