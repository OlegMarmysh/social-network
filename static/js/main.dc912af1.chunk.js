(window["webpackJsonpmy-app"]=window["webpackJsonpmy-app"]||[]).push([[0],{125:function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var r=n(42),a=n(9),s="social-network/dialogsPage/SEND_MESSAGE",o={dialogs:[{id:"1",name:"Pasha"},{id:"2",name:"Oleg"},{id:"3",name:"Nastya"},{id:"4",name:"Alex"},{id:"5",name:"John"}],messages:[{id:"1",message:"Hello my dear friend"},{id:"2",message:"How are you, BRO"},{id:"3",message:"Where is my socks"}]},i=function(e){return{type:s,newTextMessage:e}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:var n={id:"4",message:t.newTextMessage};return Object(a.a)({},e,{messages:[].concat(Object(r.a)(e.messages),[n]),newTextMessage:""});default:return e}}},129:function(e,t,n){e.exports={sidebar:"Sidebar_sidebar__20WZw"}},133:function(e,t,n){e.exports={usersPage:"Paginator_usersPage__3bBdp"}},134:function(e,t,n){e.exports=n.p+"static/media/users-vector-icon-png_260862.13988554.jpg"},135:function(e,t,n){e.exports=n.p+"static/media/Spinner-1s-200px.b0fb2661.svg"},16:function(e,t,n){e.exports={nav:"NavBar_nav__3NF4E",item:"NavBar_item__2seVN",activeLink:"NavBar_activeLink__16Ler"}},164:function(e,t,n){e.exports=n(290)},169:function(e,t,n){},19:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n(132),a=r.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"f886d0ad-c005-4c6a-95be-b337dfab64f4"}}),s={getUsers:function(e,t){return a.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},unfollowUsers:function(e){return a.delete("follow/".concat(e))},followUsers:function(e){return a.post("follow/".concat(e),{})}},o={getAuthUserData:function(){return a.get("auth/me")},login:function(e,t,n){return a.post("auth/login",{email:e,password:t,rememberMe:n})},logout:function(){return a.delete("auth/login")}},i={getUserProfile:function(e){return a.get("profile/".concat(e))},getUserStatus:function(e){return a.get("profile/status/".concat(e))},updateUserStatus:function(e){return a.put("profile/status",{status:e})}}},290:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=(n(95),n(62)),o=n.n(s),i=n(32),c=n(33),u=n(35),l=n(34),m=n(36),f=(n(169),n(16)),p=n.n(f),d=n(12),g=n(87),E=n.n(g),v=function(e){return a.a.createElement("div",{className:E.a.listFriends},a.a.createElement("div",null,a.a.createElement("img",{src:"http://www.gamer.ru/system/attached_images/images/000/412/647/original/awesome_smiley___engineer_tf2_by_sitic.png"})),a.a.createElement("div",{className:E.a.name},e.name))},b=n(129),h=n.n(b),w=function(e){var t=e.friends.map((function(e){return a.a.createElement(v,{name:e.name})}));return a.a.createElement("div",{className:h.a.sidebar},a.a.createElement("span",null,"Friends"),a.a.createElement("div",null,t))},O=n(11),P=Object(O.b)((function(e){return{friends:e.sidebar.friends}}),(function(e){return{}}))(w),_=function(){return a.a.createElement("div",{className:p.a.nav},a.a.createElement("div",{className:p.a.item},a.a.createElement(d.b,{to:"/Profile",activeClassName:p.a.activeLink},"Profile")),a.a.createElement("div",{className:p.a.item},a.a.createElement(d.b,{to:"/Dialogs",activeClassName:p.a.activeLink},"Messages")),a.a.createElement("div",{className:p.a.item},a.a.createElement(d.b,{to:"/news",activeClassName:p.a.activeLink},"News")),a.a.createElement("div",{className:p.a.item},a.a.createElement(d.b,{to:"/Music",activeClassName:p.a.activeLink},"Music")),a.a.createElement("div",{className:p.a.item},a.a.createElement(d.b,{to:"/Settings",activeClassName:p.a.activeLink},"Settings")),a.a.createElement("div",{className:p.a.item},a.a.createElement(d.b,{to:"/Users",activeClassName:p.a.activeLink},"Users")),a.a.createElement("div",null,a.a.createElement(P,null)))},j=n(28),y=function(){return a.a.createElement("div",null,"News")},S=function(){return a.a.createElement("div",null,"Music")},k=function(){return a.a.createElement("div",null,"Settings")},I=n(8),N=n.n(I),x=n(42),C=n(9),F=n(19),U=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(C.a)({},e,{},r):e}))},z="social-network/userPage/FOLLOW",L="social-network/userPage/UNFOLLOW",T="social-network/userPage/SET_USERS",A="social-network/userPage/SET_PAGES",M="social-network/userPage/TOTAL_COUNT_USERS",D="social-network/userPage/TOGGLE_IS_FETCHING",R="social-network/userPage/FOLLOWING_IN_PROGRESS",B={users:[],totalCountItems:50,sizePage:10,currentPage:1,isFetching:!1,followingInProgress:[],portionSize:10},G=function(e){return{type:D,isFetching:e}},W=function(e,t){return{type:R,isFetching:e,userId:t}},H=function(e,t,n,r){return N.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,N.a.awrap(n);case 2:0===a.sent.data.resultCode&&e(r),e(W(!1,t));case 5:case"end":return a.stop()}}))},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object(C.a)({},e,{users:U(e.users,t.userId,"id",{followed:!0})});case L:return Object(C.a)({},e,{users:U(e.users,t.userId,"id",{followed:!1})});case T:return Object(C.a)({},e,{users:t.users});case A:return Object(C.a)({},e,{currentPage:t.pageNumber});case M:return Object(C.a)({},e,{totalCountItems:t.countUsers});case D:return Object(C.a)({},e,{isFetching:t.isFetching});case R:return Object(C.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(x.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},J=n(66),V=n.n(J),Z=n(127),K=n(133),X=n.n(K),Y=function(e){for(var t=e.totalCountItems,n=e.sizePage,s=e.currentPage,o=e.onSetPages,i=e.portionSize,c=Math.ceil(t/n),u=[],l=1;l<=c;l++)u.push(l);var m=Math.ceil(c/i),f=Object(r.useState)(1),p=Object(Z.a)(f,2),d=p[0],g=p[1],E=(d-1)*i+1,v=d*i;return a.a.createElement("div",null,d>1&&a.a.createElement("button",{onClick:function(){g(d-1)}},"PREV"),u.filter((function(e){return e>=E&&e<=v})).map((function(e){return a.a.createElement("span",{className:s===e&&X.a.usersPage,onClick:function(){o(e)}},e)})),m>d&&a.a.createElement("button",{onClick:function(){g(d+1)}},"NEXT"))},Q=n(134),$=n.n(Q),ee=function(e){var t=e.userId,n=e.photos,r=e.followed,s=e.name,o=e.status,i=e.followingInProgress,c=e.unFollow,u=e.follow;return a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement(d.b,{to:"/profile/".concat(t)},a.a.createElement("img",{className:V.a.photo,src:null!==n.small?n.small:$.a}))),a.a.createElement("div",null,r?a.a.createElement("button",{disabled:i.some((function(e){return e===t})),onClick:function(){c(t)}},"Unfollow"):a.a.createElement("button",{disabled:i.some((function(e){return e===t})),onClick:function(){u(t)}},"Follow")),a.a.createElement("span",null,a.a.createElement("div",null,s),a.a.createElement("div",null,o)),a.a.createElement("span",null,a.a.createElement("div",null,"u.location.country"),a.a.createElement("div",null,"u.location.city")))},te=function(e){var t=e.totalCountItems,n=e.portionSize,r=e.sizePage,s=e.currentPage,o=e.onSetPages,i=e.users,c=e.followingInProgress,u=e.unFollow,l=e.follow;return a.a.createElement("div",null,a.a.createElement(Y,{totalCountItems:t,sizePage:r,currentPage:s,onSetPages:o,portionSize:n}),i.map((function(e){return a.a.createElement(ee,{userId:e.id,status:e.status,name:e.name,followed:e.followed,photos:e.photos,followingInProgress:c,unFollow:u,follow:l,className:V.a.users})})))},ne=n(63),re=function(e){return e.users.users},ae=function(e){return e.users.totalCountItems},se=function(e){return e.users.sizePage},oe=function(e){return e.users.currentPage},ie=function(e){return e.users.isFetching},ce=function(e){return e.users.followingInProgress},ue=function(e){return e.users.portionSize},le=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).onSetPages=function(e){n.props.requestUsers(e,n.props.sizePage)},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.requestUsers(this.props.currentPage,this.props.sizePage)}},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,this.props.isFetching?a.a.createElement(ne.a,null):null," "),a.a.createElement("div",null,a.a.createElement(te,{totalCountItems:this.props.totalCountItems,portionSize:this.props.portionSize,sizePage:this.props.sizePage,currentPage:this.props.currentPage,onSetPages:this.onSetPages,users:this.props.users,unFollow:this.props.unFollow,follow:this.props.follow,followingInProgress:this.props.followingInProgress})))}}]),t}(a.a.Component),me=Object(O.b)((function(e){return{users:re(e),totalCountItems:ae(e),sizePage:se(e),currentPage:oe(e),isFetching:ie(e),followingInProgress:ce(e),portionSize:ue(e)}}),{follow:function(e){return function(t){H(t,e,F.c.followUsers(e),function(e){return{type:z,userId:e}}(e))}},unFollow:function(e){return function(t){H(t,e,F.c.unfollowUsers(e),function(e){return{type:L,userId:e}}(e))}},requestUsers:function(e,t){return function(n){var r;return N.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n(G(!0)),a.next=3,N.a.awrap(F.c.getUsers(e,t));case 3:r=a.sent,n(G(!1)),n((o=r.items,{type:T,users:o})),n((s=r.totalCount,{type:M,countUsers:s})),n({type:A,pageNumber:e});case 8:case"end":return a.stop()}var s,o}))}}})(le),fe=n(90),pe=n.n(fe),de=function(e){return a.a.createElement("div",{className:pe.a.header},a.a.createElement("img",{src:"https://avatanplus.com/files/resources/mid/5cd273c518f1216a961439ee.png"}),a.a.createElement("div",{className:pe.a.loginBlock},e.isAuth?a.a.createElement("div",null,e.login," - ",a.a.createElement("button",{onClick:e.logout},"Log out")):a.a.createElement(d.b,{to:"/login"},"Login")))},ge=n(44),Ee="social-network/auth/SET_USER_DATA",ve={userId:null,login:null,email:null,isFetching:!1,isAuth:!1},be=function(e,t,n,r){return{type:Ee,payload:{userId:e,login:t,email:n,isAuth:r}}},he=function(){return function(e){var t,n,r,a,s;return N.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,N.a.awrap(F.a.getAuthUserData());case 2:0===(t=o.sent).data.resultCode&&(n=t.data.data,r=n.id,a=n.login,s=n.email,e(be(r,a,s,!0)));case 4:case"end":return o.stop()}}))}},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ee:return Object(C.a)({},e,{},t.payload);default:return e}},Oe=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(de,this.props)}}]),t}(a.a.Component),Pe=Object(O.b)((function(e){return{login:e.auth.login,isAuth:e.auth.isAuth}}),{logout:function(){return function(e){return N.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.awrap(F.a.logout());case 2:e(be(null,null,null,!1));case 3:case"end":return t.stop()}}))}}})(Oe),_e=n(43),je=n(126),ye=n(38),Se=n(53),ke=n(50),Ie=n.n(ke),Ne=Object(je.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error;return a.a.createElement("form",{onSubmit:t},Object(ye.c)("email","Email",ye.a,[Se.b]),Object(ye.c)("password","Password",ye.a,[Se.b],{type:"password"}),Object(ye.c)("rememberMe",null,"input",null,{type:"checkbox"},"remember me"),a.a.createElement("div",{className:Ie.a.loginError},n),a.a.createElement("div",null,a.a.createElement("button",null,"Login")))})),xe=Object(O.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:function(e,t,n){return function(r){var a,s;return N.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,N.a.awrap(F.a.login(e,t,n));case 2:0===(a=o.sent).data.resultCode?r(he()):(s=a.data.messages.length>0?a.data.messages[0]:"Some error",r(Object(ge.a)("login",{_error:s})));case 4:case"end":return o.stop()}}))}}})((function(e){var t=e.login;return e.isAuth?a.a.createElement(j.a,{to:"/profile"}):a.a.createElement("div",null,a.a.createElement("h1",null,"LOGIN"),a.a.createElement(Ne,{onSubmit:function(e){var n=e.email,r=e.password,a=e.rememberMe;Object(_e.a)(e,["email","password","rememberMe"]);t(n,r,a)}}))})),Ce=n(7),Fe="social-network/app/INITIALIZED_SUCCESS",Ue={initialized:!1},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Fe:return Object(C.a)({},e,{initialized:!0});default:return e}},Le=n(93),Te=n(125),Ae={friends:[{name:"Vika"},{name:"Olga"},{name:"Boris"}]},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae;arguments.length>1&&arguments[1];return e},De=n(137),Re=n(138),Be=n(128),Ge=Object(Ce.combineReducers)({profilePage:Le.b,dialogsPage:Te.a,sidebar:Me,users:q,auth:we,form:Be.a,app:ze}),We=Object(Ce.createStore)(Ge,Object(Re.composeWithDevTools)(Object(Ce.applyMiddleware)(De.a))),He=function(e){return function(t){return a.a.createElement(r.Suspense,{fallback:a.a.createElement("div",null,"Loading...")},a.a.createElement(e,t))}},qe=a.a.lazy((function(){return n.e(4).then(n.bind(null,296))})),Je=a.a.lazy((function(){return n.e(3).then(n.bind(null,295))})),Ve=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?a.a.createElement("div",{className:"appWrapper"},a.a.createElement(Pe,null),a.a.createElement(_,null),a.a.createElement("div",{className:"app_wrapper_profile"},a.a.createElement(j.b,{path:"/profile/:userId?",render:He(Je)}),a.a.createElement(j.b,{path:"/dialogs",render:He(qe)}),a.a.createElement(j.b,{path:"/news",render:function(){return a.a.createElement(y,null)}}),a.a.createElement(j.b,{path:"/music",render:function(){return a.a.createElement(S,null)}}),a.a.createElement(j.b,{path:"/settings",render:function(){return a.a.createElement(k,null)}}),a.a.createElement(j.b,{path:"/users",render:function(){return a.a.createElement(me,null)}}),a.a.createElement(j.b,{path:"/login",render:function(){return a.a.createElement(xe,null)}}))):a.a.createElement(ne.a,null)}}]),t}(r.Component),Ze=Object(Ce.compose)(j.f,Object(O.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t;return N.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e(he()),n.next=3,N.a.awrap(Promise.all([t]));case 3:e({type:Fe});case 4:case"end":return n.stop()}}))}}}))(Ve),Ke=function(e){return a.a.createElement(d.a,null,a.a.createElement(O.a,{store:We},a.a.createElement(Ze,null)))};o.a.render(a.a.createElement(Ke,null),document.getElementById("root"))},38:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return f}));var r=n(43),a=n(0),s=n.n(a),o=n(50),i=n.n(o),c=n(86),u=(n(53),function(e){e.input;var t=e.meta,n=Object(r.a)(e,["input","meta"]),a=t.touched&&t.error;return s.a.createElement("div",null,s.a.createElement("div",{className:a?i.a.error:""},n.children),s.a.createElement("div",{className:i.a.error},a&&s.a.createElement("span",null,t.error)))}),l=function(e){var t=e.input,n=(e.meta,Object(r.a)(e,["input","meta"]));return s.a.createElement(u,e,s.a.createElement("textarea",Object.assign({},t,n)))},m=function(e){var t=e.input,n=(e.meta,Object(r.a)(e,["input","meta"]));return s.a.createElement(u,e,s.a.createElement("input",Object.assign({},t,n)))},f=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return s.a.createElement("div",null,s.a.createElement(c.a,Object.assign({name:e,placeholder:t,component:n,validate:r},a))," ",o)}},50:function(e,t,n){e.exports={error:"FormsControl_error__1S70_",loginError:"FormsControl_loginError__2m793"}},53:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));n(0);var r=function(e){if(!e)return"Field is required"},a=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbol")}}},63:function(e,t,n){"use strict";var r=n(0),a=n.n(r),s=n(135),o=n.n(s);t.a=function(e){return a.a.createElement("div",null,a.a.createElement("img",{src:o.a}))}},66:function(e,t,n){e.exports={users:"Users_users__tFwSo",photo:"Users_photo__1JreJ"}},87:function(e,t,n){e.exports={listFriends:"Friends_listFriends__2v1S1",name:"Friends_name__1sxdB"}},90:function(e,t,n){e.exports={header:"Header_header__25gid",loginBlock:"Header_loginBlock__3arcq"}},93:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return E})),n.d(t,"e",(function(){return v}));var r=n(8),a=n.n(r),s=n(42),o=n(9),i=n(19),c="social-network/profilePage/ADD_POST",u="social-network/profilePage/SET_USER_PROFILE",l="social-network/profilePage/SET_USER_STATUS",m="social-network/profilePage/DELETE_POST",f={posts:[{id:"1",post:"How are you my dear friends",likeCounts:"60"},{id:"2",post:"Its my first project",likeCounts:"67"}],profile:null,status:""},p=function(e){return{type:c,newTextPost:e}},d=function(e){return{type:l,status:e}},g=function(e){return function(t){var n;return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.a.awrap(i.b.getUserProfile(e));case 2:n=r.sent,t((s=n.data,{type:u,profile:s}));case 4:case"end":return r.stop()}var s}))}},E=function(e){return function(t){var n;return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.a.awrap(i.b.getUserStatus(e));case 2:n=r.sent,t(d(n.data));case 4:case"end":return r.stop()}}))}},v=function(e){return function(t){var n;return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.a.awrap(i.b.updateUserStatus(e));case 2:0===(n=r.sent).data.resultCode?t(d(e)):t(d(n.data.messages));case 4:case"end":return r.stop()}}))}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:var n={id:"3",post:t.newTextPost,likeCounts:"0"};return Object(o.a)({},e,{posts:[].concat(Object(s.a)(e.posts),[n])});case m:return Object(o.a)({},e,{posts:e.posts.filter((function(e){return e.id!==t.postId}))});case u:return Object(o.a)({},e,{profile:t.profile});case l:return Object(o.a)({},e,{status:t.status});default:return e}}},95:function(e,t,n){}},[[164,1,2]]]);
//# sourceMappingURL=main.dc912af1.chunk.js.map